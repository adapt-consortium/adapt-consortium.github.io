{"version":3,"sources":["adapt/vfgsearch/similarity.cljc"],"mappings":";AAGA,yCAAA,zCAAOA,0FAAaC,SAASC;AAA7B,uEAEO,AAACC,4CAAI,WAAAC,9HAEL,OAACM,+CAAOC;AAFH,AAAA,IAAAN,aAAAD;WAAA,AAAAE,4CAAAD,WAAA,IAAA,lEAAME;aAAN,AAAAD,4CAAAD,WAAA,IAAA,pEAAWG;AAAX,AACE,QAAGA,SAAO,kEAAA,lEAACC,4CAAIP,iBAAiBK;GAFvCN;;AAKP,uCAAA,vCAAOW,sFAAWX;AAAlB,AACE,iFACK,AAACE,4CAAI,WAAAU,vHAEL,AAACH,+CAAOC,zDACRK;AAHK,AAAA,IAAAF,aAAAD;QAAA,AAAAP,4CAAAQ,WAAA,IAAA,/DAAMC;aAAN,AAAAT,4CAAAQ,WAAA,IAAA,pEAAQN;AAAR,AACE,QAAGA,SAAOA;GAFjBP;;AAMP,+CAAA,/CAAMgB,sGAAmBhB,SAASC;AAAlC,AACE,IAAMgB,QAAM,AAAClB,uCAAYC,SAASC;IAC5BiB,qBAAmB,AAACP,qCAAUX;IAC9BmB,6BAA2B,AAACR,qCAAU,AAACS,sBAAYnB,iBAAiB,AAACoB,eAAKrB;IAC1EsB,oBAAkB,CAAGJ,qBAAmBC;AAH9C,AAIE,GAAI,uBAAA,tBAAOG;AAAX;;AAEE,QAAGL,QAAMK;;;AAKf","names":["adapt.vfgsearch.similarity/dot-product","document","another-document","cljs.core.map","p__52212","vec__52213","cljs.core.nth","term","tf-idf","cljs.core.get","cljs.core.reduce","cljs.core/+","adapt.vfgsearch.similarity/magnitude","p__52217","vec__52218","_","Math/sqrt","adapt.vfgsearch.similarity/cosine-similarity","dot-p","document-magnitude","another-document-magnitude","cljs.core/select-keys","cljs.core/keys","magnitude-product"],"sourcesContent":["(ns adapt.vfgsearch.similarity)\n\n\n(defn- dot-product [document another-document]\n  (->> document\n       (map (fn [[term tf-idf]]\n              (* tf-idf (get another-document term 0.0))))\n       (reduce +)))\n\n(defn- magnitude [document]\n  (->> document\n       (map (fn [[_ tf-idf]]\n              (* tf-idf tf-idf)))\n       (reduce +)\n       Math/sqrt))\n\n(defn cosine-similarity [document another-document]\n  (let [dot-p (dot-product document another-document)\n        document-magnitude (magnitude document)\n        another-document-magnitude (magnitude (select-keys another-document (keys document)))\n        magnitude-product (* document-magnitude another-document-magnitude)]\n    (if (zero? magnitude-product)\n      0.0\n      (/ dot-p magnitude-product))))\n\n\n\n\n(comment\n  \n  \n  (let [doc-a {\"hello\" 2.5 \"goodbye\" 0.3}]\n    (cosine-similarity doc-a doc-a))\n  \n  (cosine-similarity\n   {\"hello\" 2.5 \"goodbye\" 0.3}\n   {\"clojure\" 2.1 \"goodbye\" 2.8})\n  \n  \n  \n  )\n"]}